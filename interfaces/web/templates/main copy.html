<!DOCTYPE html>
<html lang="es">
    <head>
        <meta http-equiv="content-type" content="text/html"; charset="UTF-8">
        <meta name="keywords" content="Fatjack, RL">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Xavi-Linux">
        <title>Fatjack</title>
        <link rel="stylesheet" type="text/css" href="../static/css/main.css">
        <!--<link rel="icon" href="../static/imgs/favicon.png" type="image/x-icon"> -->        
        <script type="text/javascript" src="../static/js/main.js"></script>
        <script type="text/javascript" src="../static/js/d3.v7.js"></script>
        <script>
            function chart(){
                const data = [4, 8, 15, 16, 3, 42, 8, 9];
                const width = 500;
                x = d3.scaleLinear()
                      .domain([0, d3.max(data)])
                      .range([0, width]);
                
                y = d3.scaleBand()
                      .domain(d3.range(data.length))
                      .range([0, 20 * data.length]);

                const svg = d3.create("svg")
                                .attr("width", width)
                                .attr("height", y.range()[1])
                                .attr("font-size", "10")
                                .attr("font-family", "sans-serif")
                                .attr("text-anchor", "end");
                
                const bar = svg.selectAll("g")
                                     .data(data)
                                     .join("g")
                                     .attr("transform", (d, i) => `translate(0,${y(i)})`);

            
                bar.append("rect")
                   .attr("fill", "steelblue")
                   .attr("width", x)
                   .attr("height", y.bandwidth()-1);
                
                
                bar.append("text")
                   .attr("fill", "white")
                   .attr("x", d => x(d) - 3)
                   .attr("y", (y.bandwidth() - 1)/2)
                   .attr("dy", "0.35em")
                   .text(d => d)
            
                return svg.node();
            }

            const element = chart();
            
            function margins(){
                const width = 1000;
                const height = 1000;
                margin = ({top: 20, right:10, bottom:30, left:40});
                var data = [Object({t:0, value:50}),
                            Object({t:1, value:100}),
                            Object({t:2, value: 75}),
                            Object({t:3, value:250}),
                            Object({t:4, value:125})
            ];

                x = d3.scaleBand()
                      .domain(d3.range(d3.max(data, d=> d.t)))
                      .rangeRound([margin.left, width - margin.right])
                      .padding(0.1);
                
                y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.value)])
                .range([height - margin.bottom, margin.top]);
                
                line = d3.line()
                         .defined(d => !isNaN(d.value))
                         .x(d => x(d.t))
                         .y(d => y(d.value))

                xAxis = g => g
                        .attr("transform", `translate(0, ${height - margin.bottom})`)
                        .call(d3.axisBottom(x).ticks(width/80).tickSizeOuter(0))
                
                yAxis = g => g
                        .attr("transform", `translate(${margin.left},0)`)
                        .call(d3.axisLeft(y))
                        .call(g => g.select(".domain").remove())

                const svg = d3.create("svg")
                              .attr("viewBox", [0, 0, width, height]);
                
                svg.append("g").call(xAxis);
                svg.append("g").call(yAxis);
                
                svg.append("path")
                   .datum(data)
                   .attr("fill", "none")
                   .attr("stroke", "steelblue")
                   .attr("stroke-width", 1.5)
                   .attr("stroke-linejoin", "round")
                   .attr("stroke-linecap", "round")
                   .attr("d", line)

                return svg.node();
            }

            const withmargins = margins();
        </script>
    </head>
    <body>
        <header>
            <h1>Fatjack</h1>
        </header>
        <section>
            <form>
                <div id="dealer">
                    <div>
                        <label>Dealer:</label>
                    </div>
                    <ul class="cards" id="dealer_hand">
                    </ul>
                </div>
                <div id="players">
                    <div>
                        <label id="name">Player:</label>
                    </div>
                    <ul class="cards" id="player_hand">
                    </ul>
                </div>
                <div>
                    <input type="button" value="Hit" disabled class="instruction">
                    <input type="button" value="Stand" disabled class="instruction">
                </div>
            </form>
            <form id="bet_container">
                <label>Next bet value:</label>
                <input type="number" min="1" id="bet_value">
                <br>
                <input type="button" value="Place bet" id="bet_placer">
            </form>
            <div id="game_status">
                <label>Current bet:</label>
                <input type="text" disabled placeholder="€0.00" id="current_bet">
                <br>
                <label>Total Cash:</label>
                <input type="text" disabled placeholder="€0.00" id="total_cash">
            </div>
            <input type="button" value="Play!" id="play">
            <form id="player_info">
                <label>Player's name:</label>
                <input type="text" id="sent_name">
                <label>Num. Players:</label>
                <input type="number" min="1" max="1" step="1"value="1" id="num_players">
                <br>
                <label>Cash:</label>
                <input type="number" min="1000" id="cash">
                <label>Allow indebtness</label>
                <select id="indebtness">
                    <option>Y</option>
                    <option>N</option>
                </select>
                <br>
                <input type="submit" value="Start!" id="start">
            </form>
            <!--<img src="/static/img/board.jpg">-->
        </section>
        <div id="chart">

        </div>
        <footer>
            <p>Xavi-Linux &reg;</p>
        </footer>
    </body>
    <script>
        document.getElementById("chart").appendChild(element);
        document.getElementById("chart").appendChild(withmargins);
    </script>
</html>
